{"ast":null,"code":"// Файл с обработкой задач, которые находятся на главном календаре, высчисление стилей задачи\nimport moment from \"moment\";\nmoment.locale('ru');\nexport default {\n  // Функция для вычисления фона задачи\n  calculateTaskColor(task) {\n    if (task.type == \"Personal\") {\n      return \"#C4D7DA\";\n    }\n    if (task.type == \"Working\") {\n      return \"#FFDEBF\";\n    }\n    if (task.type == \"Optional\") {\n      return \"#DDC9C3\";\n    }\n  },\n  // Функция для вычисления длины задачи в пикселях\n  calculateTaskLengthInPixels(task) {\n    // Получаем время начала и времени окончания из задачи\n    const startTime = new Date(task.startTime);\n    const endTime = new Date(task.endTime);\n\n    // const momStart = moment().format(task.startTime)\n    // const momEnd = moment().format(task.endTime)\n    // console.log('utc', mom)\n    // console.log('startTime', startTime)\n\n    // Вычисляем продолжительность задачи в минутах\n    const durationInMinutes = (endTime - startTime) / (1000 * 60);\n    // console.log(momEnd, momStart)\n    // console.log(durationInMinutes)\n\n    // Вычисляем длину задачи в пикселях (1 час = 80 пикселей)\n    let lengthInPixels = durationInMinutes / 60 * 80;\n    // console.log(lengthInPixels)\n\n    console.log(endTime.getHours());\n    const addedHours = endTime.getHours() - startTime.getHours();\n    // console.log(addedHours)\n    // Добавляем 10px за каждый пройденный час\n    if (addedHours + 1 > 1) {\n      let additionalPixels = addedHours * 9;\n      if (endTime.getMinutes() !== 0) {\n        lengthInPixels += 5;\n      }\n      if (endTime.getHours() == 23 && endTime.getMinutes() == 59) {\n        lengthInPixels += 2;\n      }\n      // console.log(lengthInPixels + additionalPixels)\n      return lengthInPixels + additionalPixels;\n    }\n    if (endTime.getHours() == 23 && endTime.getMinutes() == 59) {\n      return lengthInPixels + 2;\n    }\n    return lengthInPixels;\n  },\n  // Функция для вычисления левого позиционирования задачи в пикселях\n  calculateLeftPosition(task, currentWeek) {\n    const startTime = new Date(task.startTime);\n    const day = startTime.getDate();\n    const month = startTime.getMonth() + 1;\n    const year = startTime.getFullYear();\n    const date = [day, month, year];\n    for (let i = 0; i < currentWeek.length; i++) {\n      if (currentWeek[i][1] == date[0] && currentWeek[i][4] == date[1]) {\n        return i * 180 + 65;\n      }\n    }\n  },\n  // Функция для вычисления верхнего позиционирования задачи в пикселях\n  calculateTaskStartPosition(task) {\n    const startTime = new Date(task.startTime);\n    const startHour = startTime.getHours() - 3; // Используем getHours() для локального времени\n    const startMinute = startTime.getMinutes(); // Используем getMinutes() для локального времени\n    const totalMinutes = startHour * 60 + startMinute;\n    const startPosition = totalMinutes / 60 * 89 - 20;\n    if (startMinute === 0) {\n      return startPosition + 5;\n    }\n    return startPosition;\n  }\n};","map":{"version":3,"names":["moment","locale","calculateTaskColor","task","type","calculateTaskLengthInPixels","startTime","Date","endTime","durationInMinutes","lengthInPixels","console","log","getHours","addedHours","additionalPixels","getMinutes","calculateLeftPosition","currentWeek","day","getDate","month","getMonth","year","getFullYear","date","i","length","calculateTaskStartPosition","startHour","startMinute","totalMinutes","startPosition"],"sources":["C:/Users/Sergey/Documents/GitHub/task-manager/client/src/store/modules/Task/Task.js"],"sourcesContent":["// Файл с обработкой задач, которые находятся на главном календаре, высчисление стилей задачи\r\nimport moment from \"moment\";\r\nmoment.locale('ru')\r\nexport default {\r\n    // Функция для вычисления фона задачи\r\n    calculateTaskColor(task) {\r\n        if (task.type == \"Personal\") {\r\n            return \"#C4D7DA\";\r\n        }\r\n        if (task.type == \"Working\") {\r\n            return \"#FFDEBF\";\r\n        }\r\n        if (task.type == \"Optional\") {\r\n            return \"#DDC9C3\";\r\n        }\r\n    },\r\n\r\n    // Функция для вычисления длины задачи в пикселях\r\n    calculateTaskLengthInPixels(task) {\r\n        // Получаем время начала и времени окончания из задачи\r\n        const startTime = new Date(task.startTime);\r\n        const endTime = new Date(task.endTime);\r\n        \r\n        // const momStart = moment().format(task.startTime)\r\n        // const momEnd = moment().format(task.endTime)\r\n        // console.log('utc', mom)\r\n        // console.log('startTime', startTime)\r\n\r\n        // Вычисляем продолжительность задачи в минутах\r\n        const durationInMinutes = (endTime - startTime) / (1000 * 60);\r\n        // console.log(momEnd, momStart)\r\n        // console.log(durationInMinutes)\r\n\r\n        // Вычисляем длину задачи в пикселях (1 час = 80 пикселей)\r\n        let lengthInPixels = (durationInMinutes / 60) * 80\r\n        // console.log(lengthInPixels)\r\n\r\n        console.log(endTime.getHours())\r\n        const addedHours = endTime.getHours() - startTime.getHours();\r\n        // console.log(addedHours)\r\n        // Добавляем 10px за каждый пройденный час\r\n        if (addedHours + 1 > 1) {\r\n            let additionalPixels = addedHours * 9;\r\n            if (endTime.getMinutes() !== 0) {\r\n                lengthInPixels += 5;\r\n            }\r\n            if(endTime.getHours() == 23 && endTime.getMinutes() == 59){\r\n                lengthInPixels += 2\r\n            }\r\n            // console.log(lengthInPixels + additionalPixels)\r\n            return lengthInPixels + additionalPixels;\r\n        }\r\n\r\n        if(endTime.getHours() == 23 && endTime.getMinutes() == 59){\r\n            return lengthInPixels + 2\r\n        }\r\n        return lengthInPixels;\r\n    },\r\n    \r\n    // Функция для вычисления левого позиционирования задачи в пикселях\r\n    calculateLeftPosition(task, currentWeek) {\r\n        const startTime = new Date(task.startTime);\r\n        const day = startTime.getDate();\r\n        const month = startTime.getMonth() + 1; \r\n        const year = startTime.getFullYear();\r\n\r\n        const date= [day, month, year];\r\n\r\n        for (let i = 0; i < currentWeek.length; i++) {\r\n            if (currentWeek[i][1] == date[0] && currentWeek[i][4] == date[1]) {\r\n                return i * 180 + 65;\r\n            }\r\n        }\r\n    },\r\n\r\n    // Функция для вычисления верхнего позиционирования задачи в пикселях\r\n    calculateTaskStartPosition(task) {\r\n        const startTime = new Date(task.startTime);\r\n        const startHour = startTime.getHours() - 3; // Используем getHours() для локального времени\r\n        const startMinute = startTime.getMinutes(); // Используем getMinutes() для локального времени\r\n        const totalMinutes = (startHour) * 60 + startMinute;\r\n    \r\n        const startPosition = (totalMinutes / 60) * 89 - 20;\r\n        if (startMinute === 0) {\r\n            return startPosition + 5;\r\n        }\r\n        return startPosition;\r\n    }\r\n    \r\n\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}